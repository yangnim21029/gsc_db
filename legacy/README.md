<p align="center">
  <img src="gsc_service_banner.jpg" alt="GSC Database Manager Banner" width="100%">
</p>

# GSC Database Manager

<p align="center">
  <strong>å®Œå…¨æŒæ§æ‚¨çš„ Google Search Console æ•¸æ“š</strong>
</p>
<p align="center">
    <a href="https://github.com/your-username/gsc_db/blob/main/LICENSE"><img alt="License" src="https://img.shields.io/github/license/your-username/gsc_db?style=flat-square"></a>
    <a href="https://python.org"><img alt="Python Version" src="https://img.shields.io/badge/python-3.11+-blue?style=flat-square"></a>
    <a href="https://github.com/astral-sh/ruff"><img alt="Ruff" src="https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/ruff/main/assets/badge/v2.json&style=flat-square"></a>
</p>

æ‰“ç ´ GSC 16 å€‹æœˆæ•¸æ“šé™åˆ¶ï¼Œå»ºç«‹æ‚¨å°ˆå±¬çš„æ°¸ä¹…æ•¸æ“šå€‰åº«ã€‚æ”¯æ´è‡ªå‹•åŒæ­¥ã€æ¯å°æ™‚ç²¾ç´°æ•¸æ“šã€API æœå‹™ï¼Œç‚º SEO åˆ†æå’Œ AI é©…å‹•å·¥å…·æä¾›å®Œæ•´çš„æ•¸æ“šåŸºç¤ã€‚

## ğŸ¯ ç‚ºä»€éº¼é¸æ“‡ GSC Database Managerï¼Ÿ

<table>
<tr>
<td width="50%">

**ğŸ”’ å®Œå…¨çš„æ•¸æ“šæ‰€æœ‰æ¬Š**

- æ°¸ä¹…ä¿å­˜æ­·å²æ•¸æ“š
- æœ¬åœ° SQLite è³‡æ–™åº«
- ç„¡ç¬¬ä¸‰æ–¹ä¾è³´é¢¨éšª

**âš¡ è‡ªå‹•åŒ– & é«˜æ•ˆèƒ½**

- æ™ºèƒ½å¢é‡åŒæ­¥
- æ¯å°æ™‚ç²¾ç´°æ•¸æ“š
- ä¼æ¥­ç´šéŒ¯èª¤è™•ç†

</td>
<td width="50%">

**ğŸ¤– AI/API å°±ç·’**

- å…§å»º FastAPI æœå‹™
- æ¨™æº–åŒ–æ•¸æ“šæ ¼å¼
- æ”¯æ´æ‰¹é‡åˆ†æ

**ğŸ› ï¸ é–‹ç™¼è€…å‹å¥½**

- ç¾ä»£ Python å·¥å…·éˆ
- å®Œæ•´æ¸¬è©¦è¦†è“‹
- è©³ç´°æ–‡æª”æŒ‡å—

</td>
</tr>
</table>

## ğŸ†• æœ€æ–°æ›´æ–°äº®é»

- **å¤šç«™é»åŒæ­¥ç³»çµ±**: æ”¯æ´æ—¥ç´šå’Œå°æ™‚ç´šæ•¸æ“šçš„æ‰¹æ¬¡åŒæ­¥ï¼Œåºåˆ—åŒ–è™•ç†ç¢ºä¿ GSC API ç©©å®šæ€§
- **é€²åº¦ç›£æ§**: å¯¦æ™‚åŒæ­¥ç‹€æ…‹ `poetry run gsc-cli sync status` å’Œé€²åº¦æŒ‡ç¤ºå™¨
- **æ™ºèƒ½éŒ¯èª¤æ¢å¾©**: è‡ªå‹•é‡è©¦ã€SSL éŒ¯èª¤è™•ç†å’Œæ•…éšœæ’é™¤å»ºè­°
- **éˆæ´»åŒæ­¥æ¨¡å¼**: æ”¯æ´ skip å’Œ overwrite æ¨¡å¼ï¼Œæ»¿è¶³ä¸åŒéœ€æ±‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- **æ°¸ä¹…æ•¸æ“šä¿å­˜**: çªç ´ Google 16 å€‹æœˆé™åˆ¶ï¼Œä½¿ç”¨ SQLite æœ¬åœ°å„²å­˜
- **æ¯å°æ™‚ç²¾ç´°æ•¸æ“š**: ä½¿ç”¨ Google å®˜æ–¹ API ç²å–æœ€ç´°ç·»çš„æµé‡æ•¸æ“š
- **æ™ºèƒ½è‡ªå‹•åŒæ­¥**: æ’ç¨‹ç³»çµ±ï¼Œé¿å…é‡è¤‡ä¸‹è¼‰ï¼Œæ”¯æ´æ–·é»çºŒå‚³
- **ä¼æ¥­ç´šéŒ¯èª¤è™•ç†**: æŒ‡æ•¸é€€é¿é‡è©¦æ©Ÿåˆ¶ï¼ŒSSL éŒ¯èª¤è‡ªå‹•æ¢å¾©
- **æ¨™æº–åŒ– API æ¥å£**: RESTful APIï¼ŒJSON æ ¼å¼ï¼Œæ”¯æ´ AI å·¥å…·é›†æˆ
- **å¤šæ ¼å¼åŒ¯å‡º**: æ”¯æ´ Excel/CSV åŒ¯å‡ºï¼Œç„¡å» å•†ç¶å®š

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ğŸ“‹ 5 åˆ†é˜å¿«é€Ÿä¸Šæ‰‹

1. **å®‰è£å·¥å…·**: `Python 3.11+` + `Poetry`
2. **å…‹éš†å°ˆæ¡ˆ**: `git clone <repo-url> && cd gsc_db`
3. **ä¸€éµè¨­å®š**: `poetry install && poetry run gsc-cli auth login`
4. **é–‹å§‹åŒæ­¥**: `poetry run gsc-cli sync daily --site-id 1 --days 7`
5. **æŸ¥çœ‹ç‹€æ…‹**: `poetry run gsc-cli sync status`

### å‰ææ¢ä»¶

- **Python 3.11+**
- **Poetry** (ä¾è³´ç®¡ç†)

```bash
# macOS (ä½¿ç”¨ Homebrew)
brew install poetry

# æˆ–è€…ä½¿ç”¨ pipx å®‰è£ Poetry
pipx install poetry
```

#### Windows ç³»çµ±å®‰è£æŒ‡å—

1. **å®‰è£ Python 3.11+**: å‰å¾€ [Python å®˜ç¶²](https://www.python.org/downloads/) ä¸‹è¼‰ä¸¦å®‰è£ï¼ˆå‹¾é¸ã€ŒAdd Python to PATHã€ï¼‰

2. **å®‰è£ Poetry**:
   ```powershell
   # ä½¿ç”¨ PowerShell å®‰è£ Poetry
   (Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | python -

   # æˆ–ä½¿ç”¨ pip å®‰è£
   pip install poetry
   ```

3. **é©—è­‰å®‰è£**:
   ```powershell
   python --version    # æ‡‰é¡¯ç¤º Python 3.11+
   poetry --version    # æ‡‰é¡¯ç¤º Poetry ç‰ˆæœ¬
   ```

#### Linux ç³»çµ±å®‰è£æŒ‡å—

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3.11 python3-pip
pip3 install poetry

# CentOS/RHEL/Fedora
dnf install python3.11 python3-pip
pip3 install poetry
```

### å®‰è£æ­¥é©Ÿ

1. **è¤‡è£½å€‰åº«**
   ```bash
   git clone https://github.com/your-username/gsc_db.git
   cd gsc_db
   ```

2. **ä¸€éµå®‰è£èˆ‡è¨­å®š**
   ```bash
   poetry install
   poetry run gsc-cli auth login
   ```

3. **è¨­å®š Google API èªè­‰**

   **åœ¨ Google Cloud Console è¨­ç½®å°ˆæ¡ˆ**ï¼š

   1. å‰å¾€ [Google Cloud Console](https://console.cloud.google.com/) å»ºç«‹æ–°å°ˆæ¡ˆ
   2. å•Ÿç”¨ **Google Search Console API**
   3. è¨­å®š OAuth åŒæ„ç•«é¢ï¼š
      - é¸æ“‡ç”¨æˆ¶é¡å‹ï¼ˆExternal æˆ– Internalï¼‰
      - å¡«å¯«æ‡‰ç”¨åç¨±å’Œè¯çµ¡è³‡è¨Š
      - æ·»åŠ æ¸¬è©¦ä½¿ç”¨è€…
   4. å»ºç«‹ OAuth 2.0 æ†‘è­‰ï¼š
      - é¸æ“‡ã€ŒDesktop applicationã€
      - ä¸‹è¼‰ JSON æ–‡ä»¶

   **è¨­ç½®æœ¬åœ°æ†‘è­‰**ï¼š
   ```bash
   # å°‡ä¸‹è¼‰çš„æ†‘è­‰æ–‡ä»¶é‡æ–°å‘½åä¸¦æ”¾å…¥ cred/ ç›®éŒ„
   cp ~/Downloads/client_secret_xxxxx.json cred/client_secret.json

   # åŸ·è¡Œèªè­‰æµç¨‹
   poetry run gsc-cli auth login
   ```

### ğŸ”§ å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

#### Windows ç³»çµ±ç‰¹åˆ¥æ³¨æ„äº‹é …

```powershell
# åŸ·è¡Œæ”¿ç­–å•é¡Œ
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# è·¯å¾‘åˆ†éš”ç¬¦è™Ÿ
cp "C:\Users\YourName\Downloads\client_secret_xxxxx.json" "cred\client_secret.json"
```

#### å¸¸è¦‹éŒ¯èª¤èˆ‡è§£æ±ºæ–¹æ³•

- **API æœªå•Ÿç”¨**ï¼šç¢ºèªå·²åœ¨ Google Cloud Console å•Ÿç”¨ Google Search Console API
- **æ†‘è­‰æª”æ¡ˆä¸å­˜åœ¨**ï¼šç¢ºèª `client_secret.json` ä½æ–¼ `cred/` ç›®éŒ„ä¸‹
- **æ¬Šé™è¢«æ‹’çµ•**ï¼šç¢ºèªæ‚¨çš„ Google å¸³è™Ÿæœ‰æ¬Šå­˜å–è¦åŒæ­¥çš„ç¶²ç«™
- **SSL/ç¶²è·¯é€£æ¥å•é¡Œ**ï¼šç³»çµ±æœƒè‡ªå‹•é‡è©¦å’Œè™•ç†ç¶²è·¯éŒ¯èª¤

#### é©—è­‰è¨­å®š

```bash
# é©—è­‰èªè­‰
poetry run gsc-cli site list

# æ¸¬è©¦åŒæ­¥åŠŸèƒ½
poetry run gsc-cli sync status
```

## ğŸ¯ åŸºæœ¬ç”¨æ³•

### æœ€å¸¸ç”¨çš„ 5 å€‹æŒ‡ä»¤

#### macOS/Linux:
```bash
# 1. æŸ¥çœ‹æ‰€æœ‰ç«™é»ç‹€æ…‹ (æœ€é‡è¦!)
poetry run gsc-cli sync status

# 2. åŒæ­¥å–®å€‹ç«™é»
poetry run gsc-cli sync daily --site-id 1 --days 7

# 3. æ‰¹æ¬¡åŒæ­¥å¤šå€‹ç«™é»
poetry run gsc-cli sync multiple "1 3 5" --days 7

# 4. å°æ™‚ç´šæ‰¹æ¬¡åŒæ­¥
poetry run gsc-cli sync hourly-multiple "1 3 5" --days 2

# 5. æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æŒ‡ä»¤
poetry run gsc-cli --help
```

#### Windows ï¼ˆå¦‚æœä¸Šé¢å‘½ä»¤ä¸å·¥ä½œï¼‰:
```powershell
# 1-5. ç›¸åŒæŒ‡ä»¤ï¼Œä½†æ”¹ç”¨ï¼š
poetry run python -m src.app sync status
poetry run python -m src.app sync daily --site-id 1 --days 7
# ... å…¶ä»–æŒ‡ä»¤é¡ä¼¼æ›¿æ›
```

### ç«™é»ç®¡ç†

```bash
# åˆ—å‡ºæ‰€æœ‰å·²é…ç½®çš„ç«™é»
poetry run gsc-cli site list

# æ–°å¢ä¸€å€‹ç«™é»åˆ°æœ¬åœ°æ•¸æ“šåº«
poetry run gsc-cli site add "sc-domain:your-site.com"
```

### æ•¸æ“šåŒæ­¥

#### åŸºæœ¬åŒæ­¥æ“ä½œ
```bash
# åŒæ­¥å–®å€‹ç«™é»æœ€è¿‘ 7 å¤©æ•¸æ“š
poetry run gsc-cli sync daily --site-id 1 --days 7

# æ‰¹æ¬¡åŒæ­¥å¤šå€‹ç«™é» (æ—¥ç´šæ•¸æ“š)
poetry run gsc-cli sync multiple "1 3 5" --days 7

# æ‰¹æ¬¡åŒæ­¥å¤šå€‹ç«™é» (å°æ™‚ç´šæ•¸æ“š)
poetry run gsc-cli sync hourly-multiple "1 3 5" --days 2

# æŸ¥çœ‹åŒæ­¥ç‹€æ…‹å’Œé€²åº¦ç›£æ§
poetry run gsc-cli sync status              # æŸ¥çœ‹æ‰€æœ‰ç«™é»ç‹€æ…‹
poetry run gsc-cli sync status 5            # æŸ¥çœ‹ç‰¹å®šç«™é»ç‹€æ…‹
```

#### åŒæ­¥æ¨¡å¼é¸æ“‡
```bash
# Skip æ¨¡å¼ (é è¨­) - è·³éå·²å­˜åœ¨çš„æ•¸æ“š
poetry run gsc-cli sync daily --site-id 5 --days 7 --sync-mode skip

# Overwrite æ¨¡å¼ - å¼·åˆ¶æ›´æ–°æ‰€æœ‰æ•¸æ“š
poetry run gsc-cli sync daily --site-id 5 --days 7 --sync-mode overwrite

# å°æ™‚ç´šæ•¸æ“šå¼·åˆ¶è¦†è“‹
poetry run gsc-cli sync hourly-multiple "4 5 6" --days 1 --force
```

### é–‹ç™¼èˆ‡æ¸¬è©¦

```bash
# åŸ·è¡Œæ‰€æœ‰å“è³ªæª¢æŸ¥
poetry run ruff check . && poetry run mypy . && poetry run pytest

# åªåŸ·è¡Œæ¸¬è©¦
poetry run pytest

# ç¨‹å¼ç¢¼æ ¼å¼åŒ–
poetry run ruff format .
```

## ğŸ¤– API æœå‹™

æœ¬å°ˆæ¡ˆåŒ…å«ä¸€å€‹ FastAPI ä¼ºæœå™¨ï¼Œå¯ä½œç‚º AI Agent æˆ– Web å„€è¡¨æ¿çš„æ•¸æ“šå¾Œç«¯ã€‚

### å•Ÿå‹•æœå‹™

```bash
# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼ˆå…·å‚™è‡ªå‹•é‡è¼‰åŠŸèƒ½ï¼‰
poetry run uvicorn src.web.api:app --reload

# å•Ÿå‹•ç”Ÿç”¢ä¼ºæœå™¨
poetry run uvicorn src.web.api:app
```

### API æ–‡æª”

- **Swagger UI**: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
- **ReDoc**: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)

## ğŸ› ï¸ é–‹ç™¼ç’°å¢ƒ

### è¨­å®šé–‹ç™¼ç’°å¢ƒ

```bash
# å®‰è£ä¾è³´ï¼ˆåŒ…æ‹¬é–‹ç™¼ä¾è³´ï¼‰
poetry install

# å®‰è£ pre-commit hooks
poetry run pre-commit install

# åŸ·è¡Œå®Œæ•´æª¢æŸ¥
poetry run ruff check . && poetry run mypy . && poetry run pytest
```

### å°ˆæ¡ˆçµæ§‹

```
gsc_db/
â”œâ”€â”€ src/                    # ä¸»è¦æºç¢¼
â”‚   â”œâ”€â”€ analysis/          # æ•¸æ“šåˆ†ææ¨¡çµ„
â”‚   â”œâ”€â”€ cli/               # CLI æŒ‡ä»¤
â”‚   â”œâ”€â”€ services/          # æ ¸å¿ƒæœå‹™ï¼ˆGSC å®¢æˆ¶ç«¯ã€æ•¸æ“šåº«ç­‰ï¼‰
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•¸
â”‚   â””â”€â”€ web/               # FastAPI Web æœå‹™
â”œâ”€â”€ tests/                 # æ¸¬è©¦æ–‡ä»¶
â”œâ”€â”€ cred/                  # èªè­‰æ–‡ä»¶ï¼ˆä¸åŒ…å«åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼‰
â”œâ”€â”€ data/                  # æ•¸æ“šåº«æ–‡ä»¶
â”œâ”€â”€ logs/                  # æ—¥èªŒæ–‡ä»¶
â”œâ”€â”€ reports/               # åˆ†æå ±å‘Š
â””â”€â”€ pyproject.toml        # Poetry ä¾è³´å®šç¾©
```

### å“è³ªä¿è­‰

- **Ruff**: å¿«é€Ÿçš„ linting å’Œæ ¼å¼åŒ–
- **mypy**: éœæ…‹é¡å‹æª¢æŸ¥
- **pytest**: æ¸¬è©¦æ¡†æ¶ï¼ˆæ”¯æ´ä¸¦è¡ŒåŸ·è¡Œï¼‰
- **pre-commit**: Git hooks è‡ªå‹•æª¢æŸ¥
- **Poetry**: ä¾è³´ç®¡ç†å’Œè™›æ“¬ç’°å¢ƒ

## ğŸ§ª æ¸¬è©¦

æœ¬å°ˆæ¡ˆå…·æœ‰å…¨é¢çš„æ¸¬è©¦å¥—ä»¶ï¼ŒåŒ…æ‹¬å–®å…ƒæ¸¬è©¦ã€æ•´åˆæ¸¬è©¦å’Œ README åŠŸèƒ½é©—è­‰æ¸¬è©¦ã€‚

```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
poetry run pytest

# åŸ·è¡Œç‰¹å®šæ¸¬è©¦
poetry run pytest tests/test_integration.py -v

# åŸ·è¡Œæ¸¬è©¦ä¸¦ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š
poetry run pytest --cov=src tests/

# é©—è­‰ README.md ä¸­æ‰€æœ‰åŠŸèƒ½çš„å¯ç”¨æ€§
poetry run pytest tests/test_readme_functionality.py -v
```

**æ¸¬è©¦ç‰¹è‰²ï¼š**
- âœ… **ç„¡æ›èµ·å•é¡Œ**ï¼šå·²è§£æ±º SQLite äº‹å‹™æ­»é–ï¼Œæ¸¬è©¦ç©©å®šé‹è¡Œ
- âœ… **å…¨é¢è¦†è“‹**ï¼šåŒ…æ‹¬ CLI å‘½ä»¤ã€API ç«¯é»ã€æ•¸æ“šåº«æ“ä½œå’Œä¸¦ç™¼è™•ç†
- âœ… **README é©—è­‰**ï¼šè‡ªå‹•é©—è­‰æ–‡æª”ä¸­æåˆ°çš„æ‰€æœ‰åŠŸèƒ½éƒ½èƒ½æ­£å¸¸å·¥ä½œ

## ğŸ“Š æ•¸æ“šåˆ†æåŠŸèƒ½

```bash
# ä½¿ç”¨ CLI é€²è¡Œæ•¸æ“šåˆ†æ
poetry run gsc-cli analyze report 1 --days 7
poetry run gsc-cli analyze compare 1 2023-01-01 2023-01-07 2023-01-08 2023-01-14

# äº’å‹•å¼æ•¸æ“šè¦–è¦ºåŒ–
poetry run python -m src.analysis.interactive_data_visualizer

# æ¯å°æ™‚æ€§èƒ½åˆ†æ
poetry run python -m src.analysis.hourly_performance_analyzer
```

## ğŸ›£ï¸ ç™¼å±•è—åœ–

- [ ] **æ•´åˆ AI Agent**: é–‹ç™¼å°è©±å¼ AI ä»£ç†ï¼Œç”¨è‡ªç„¶èªè¨€å›ç­” GSC æ•¸æ“šå•é¡Œ
- [ ] **é€²éšæ•¸æ“šåˆ†æ**: æ–°å¢å…§å»ºåˆ†æè…³æœ¬èˆ‡å ±å‘Šï¼ˆè¶¨å‹¢åµæ¸¬ã€ç•°å¸¸è­¦å ±ï¼‰
- [ ] **æ”¯æ´æ›´å¤šæ•¸æ“šæº**: æ•´åˆ Google Analyticsã€Ahrefs æˆ– Semrush
- [ ] **Web å„€è¡¨æ¿**: å»ºç«‹ç¶²é ä»‹é¢ï¼Œè¦–è¦ºåŒ–æ•¸æ“šä¸¦èˆ‡ AI Agent äº’å‹•
- [ ] **æ’ä»¶ç³»çµ±**: å…è¨±ä½¿ç”¨è€…è¼•é¬†åŠ å…¥è‡ªè¨‚çš„æ•¸æ“šæ“·å–å™¨æˆ–åˆ†ææ¨¡çµ„

## ğŸ¤ å¦‚ä½•è²¢ç»

æ­¡è¿ä»»ä½•å½¢å¼çš„è²¢ç»ï¼è«‹æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è©³ç´°çš„è²¢ç»æŒ‡å—ã€‚

### é–‹ç™¼æµç¨‹

1. Fork æ­¤å€‰åº«
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ‚¨çš„ä¿®æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. é–‹å•Ÿ Pull Request

### ç¨‹å¼ç¢¼å“è³ª

åœ¨æäº¤ PR ä¹‹å‰ï¼Œè«‹ç¢ºä¿ï¼š

```bash
# æ‰€æœ‰æª¢æŸ¥éƒ½é€šé
poetry run ruff check . && poetry run mypy . && poetry run pytest

# æ¸¬è©¦è¦†è“‹ç‡è‰¯å¥½
poetry run pytest --cov=src
```

## ğŸ“„ æˆæ¬Šæ¢æ¬¾

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ã€‚è©³æƒ…è«‹è¦‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

<p align="center">
  å¦‚æœé€™å€‹å°ˆæ¡ˆå°æ‚¨æœ‰å¹«åŠ©ï¼Œè«‹çµ¦æˆ‘å€‘ä¸€å€‹ â­ï¸ï¼
</p>
