# GSC æ¥­å‹™è…³æœ¬

> **å°ˆç‚ºç‰¹å®šæ¥­å‹™éœ€æ±‚è¨­è¨ˆçš„ä¸€æ¬¡æ€§åˆ†æå·¥å…·**

é€™å€‹è³‡æ–™å¤¾åŒ…å«äº†ä¸€æ¬¡æ€§çš„æ¥­å‹™è…³æœ¬ï¼Œç”¨æ–¼è™•ç†ç‰¹å®šçš„åˆ†æéœ€æ±‚ï¼Œè®“æ‚¨èƒ½å¤ å¿«é€Ÿç²å¾—æ‰€éœ€çš„æ•¸æ“šæ´å¯Ÿã€‚

## ğŸš€ å¿«é€Ÿé–‹å§‹

æœ€ç°¡å–®çš„ä½¿ç”¨æ–¹å¼ï¼š

```bash
# 1. æŸ¥çœ‹å¯ç”¨ç«™é»
just site-list

# 2. åŸ·è¡Œ Sitemap åˆ†æï¼ˆä»¥ç«™é» ID 1 ç‚ºä¾‹ï¼‰
just sitemap-analysis --site-id 1 --output-file scripts/reports/my_analysis.csv

# 3. æŸ¥çœ‹çµæœ
head -5 scripts/reports/my_analysis.csv
```

## ğŸ” Sitemap URL æˆæ•ˆåˆ†æå·¥å…·

### åŠŸèƒ½èªªæ˜

`sitemap_url_performance_exporter.py` æ˜¯ä¸€å€‹å¼·å¤§çš„ä¸€æ¬¡æ€§è…³æœ¬ï¼Œå°ˆé–€ç”¨æ–¼ï¼š

1. **å¾ Sitemap æå– URL**ï¼šè‡ªå‹•è§£æç«™é»çš„ Sitemap XML æ–‡ä»¶ï¼Œæ”¯æŒ Sitemap ç´¢å¼•
2. **æŸ¥è©¢æˆæ•ˆè³‡æ–™**ï¼šå¾ GSC è³‡æ–™åº«ä¸­æŸ¥è©¢é€™äº› URL çš„æˆæ•ˆæ•¸æ“š
3. **ç”Ÿæˆ CSV å ±å‘Š**ï¼šè¼¸å‡ºè©³ç´°çš„æˆæ•ˆåˆ†æå ±å‘Š

### ä½¿ç”¨æ–¹æ³•

#### åŸºæœ¬ç”¨æ³•

```bash
# ä½¿ç”¨ç«™é» ID
just sitemap-analysis --site-id 1 --output-file scripts/reports/site1_analysis.csv

# ä½¿ç”¨ç«™é» URL (è‡ªå‹•æŸ¥æ‰¾ ID)
just sitemap-analysis --site-url "https://example.com" --output-file scripts/reports/example_analysis.csv

# æŒ‡å®šæŸ¥è©¢å¤©æ•¸
just sitemap-analysis --site-id 1 --output-file scripts/reports/site1_analysis.csv --days 60

# æ‰‹å‹•æŒ‡å®š Sitemap URL
just sitemap-analysis --site-id 1 --sitemap-url "https://example.com/sitemap.xml" --output-file scripts/reports/site1_analysis.csv
```

#### ç›´æ¥ä½¿ç”¨ Python è…³æœ¬

```bash
# å®Œæ•´å‘½ä»¤
poetry run python scripts/sitemap_url_performance_exporter.py \
    --site-id 1 \
    --sitemap-url "https://example.com/sitemap.xml" \
    --output-file "scripts/reports/example_analysis.csv" \
    --days 30
```

### åƒæ•¸èªªæ˜

| åƒæ•¸            | å¿…éœ€     | èªªæ˜                                       |
| --------------- | -------- | ------------------------------------------ |
| `--site-id`     | é¸æ“‡æ€§\* | è¦æŸ¥è©¢çš„ç¶²ç«™çš„æœ¬åœ°è³‡æ–™åº« ID                |
| `--site-url`    | é¸æ“‡æ€§\* | è¦æŸ¥è©¢çš„ç¶²ç«™ URLï¼ˆè‡ªå‹•æŸ¥æ‰¾ç«™é» IDï¼‰        |
| `--sitemap-url` | é¸æ“‡æ€§   | æŒ‡å®š Sitemap URLï¼ˆå¦‚æœæœªæä¾›ï¼Œæœƒè‡ªå‹•ç™¼ç¾ï¼‰ |
| `--output-file` | å¿…éœ€     | å°å‡ºçš„ CSV æª”æ¡ˆè·¯å¾‘                        |
| `--days`        | é¸æ“‡æ€§   | æŸ¥è©¢éå»å¤šå°‘å¤©çš„æ•¸æ“šï¼ˆé è¨­ï¼š30 å¤©ï¼‰        |

\*è¨»ï¼š`--site-id` å’Œ `--site-url` å¿…é ˆæä¾›å…¶ä¸­ä¸€å€‹

### è¼¸å‡ºæ ¼å¼

ç”Ÿæˆçš„ CSV å ±å‘ŠåŒ…å«ä»¥ä¸‹æ¬„ä½ï¼š

- **URL**ï¼šå¾ Sitemap ä¸­æå–çš„ç¶²å€
- **ç¸½é»æ“Šé‡**ï¼šè©² URL çš„ç¸½é»æ“Šæ•¸
- **ç¸½æ›å…‰é‡**ï¼šè©² URL çš„ç¸½æ›å…‰æ•¸
- **å¹³å‡é»é–±ç‡(%)**ï¼šå¹³å‡é»é–±ç‡ç™¾åˆ†æ¯”
- **å¹³å‡æ’å**ï¼šå¹³å‡æœå°‹æ’å
- **ç¨ç‰¹æŸ¥è©¢æ•¸**ï¼šè§¸ç™¼è©² URL çš„ä¸åŒæŸ¥è©¢æ•¸é‡
- **æ•¸æ“šå¤©æ•¸**ï¼šæœ‰æ•¸æ“šçš„å¤©æ•¸
- **æœ€æ—©æ—¥æœŸ**ï¼šæœ€æ—©çš„æ•¸æ“šæ—¥æœŸ
- **æœ€æ–°æ—¥æœŸ**ï¼šæœ€æ–°çš„æ•¸æ“šæ—¥æœŸ
- **åœ¨è³‡æ–™åº«ä¸­**ï¼šè©² URL æ˜¯å¦åœ¨è³‡æ–™åº«ä¸­æœ‰æˆæ•ˆæ•¸æ“š

### ç¯„ä¾‹è¼¸å‡º

```csv
URL,ç¸½é»æ“Šé‡,ç¸½æ›å…‰é‡,å¹³å‡é»é–±ç‡(%),å¹³å‡æ’å,ç¨ç‰¹æŸ¥è©¢æ•¸,æ•¸æ“šå¤©æ•¸,æœ€æ—©æ—¥æœŸ,æœ€æ–°æ—¥æœŸ,åœ¨è³‡æ–™åº«ä¸­
https://example.com/page1,150,2500,6.0,12.5,25,30,2024-01-01,2024-01-30,æ˜¯
https://example.com/page2,89,1800,4.94,18.2,18,28,2024-01-03,2024-01-30,æ˜¯
https://example.com/page3,0,0,0,0,0,0,,,å¦
```

### å¯¦éš›åŸ·è¡Œç¯„ä¾‹

ä»¥ä¸‹æ˜¯ä¸€å€‹çœŸå¯¦çš„åŸ·è¡Œçµæœï¼š

```bash
$ just sitemap-analysis --site-id 5 --output-file scripts/reports/businessfocus_analysis.csv --days 7

ğŸ” æ­£åœ¨åŸ·è¡Œ Sitemap URL æˆæ•ˆåˆ†æ...
ğŸ“Š ç«™é»è³‡è¨Š: BusinessFocus (businessfocus.io)
ğŸŒ è‡ªå‹•ç™¼ç¾çš„ Sitemap URL: https://businessfocus.io/businessfocus_urlset.xml
ğŸ“„ æª¢æ¸¬åˆ° Sitemap ç´¢å¼•ï¼Œæ­£åœ¨è§£æå­ Sitemap...
âœ… æˆåŠŸæå– 173,804 å€‹ URL
ğŸ” æ­£åœ¨æŸ¥è©¢è³‡æ–™åº«ä¸­çš„æˆæ•ˆæ•¸æ“š...
ğŸ“ˆ æ‰¾åˆ° 460 å€‹ URL æœ‰æˆæ•ˆæ•¸æ“š (0.3% è¦†è“‹ç‡)
ğŸ’¾ å ±å‘Šå·²å„²å­˜è‡³: scripts/reports/businessfocus_analysis.csv
```

### æŸ¥çœ‹å¯ç”¨ç«™é»

```bash
# æŸ¥çœ‹æ‰€æœ‰ç«™é»åˆ—è¡¨
poetry run python -c "
from src.containers import Container
db = Container().database()
sites = db.get_sites()
print('å¯ç”¨ç«™é»:')
for s in sites:
    print(f'  ID: {s[\"id\"]}, åç¨±: {s[\"name\"]}, åŸŸå: {s[\"domain\"]}')
"
```

### æ³¨æ„äº‹é …

1. **è¼¸å‡ºç›®éŒ„**ï¼šè…³æœ¬æœƒè‡ªå‹•å‰µå»ºè¼¸å‡ºç›®éŒ„ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
2. **Sitemap è‡ªå‹•ç™¼ç¾**ï¼šå¦‚æœæœªæŒ‡å®š Sitemap URLï¼Œè…³æœ¬æœƒå˜—è©¦å¾ `{domain}/sitemap.xml` è‡ªå‹•ç™¼ç¾
3. **æ”¯æ´ Sitemap ç´¢å¼•**ï¼šè…³æœ¬æ”¯æ´éæ­¸è§£æ Sitemap ç´¢å¼•æ–‡ä»¶
4. **æ•¸æ“šè¦†è“‹ç‡**ï¼šè…³æœ¬æœƒé¡¯ç¤º Sitemap URL èˆ‡è³‡æ–™åº«æ•¸æ“šçš„è¦†è“‹ç‡çµ±è¨ˆ
5. **Git å¿½ç•¥**ï¼šç”Ÿæˆçš„å ±å‘Šæœƒè¢« Git å¿½ç•¥ï¼Œä¸æœƒè¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶

### æ•…éšœæ’é™¤

#### å¸¸è¦‹å•é¡Œ

1. **æ‰¾ä¸åˆ°ç«™é»**ï¼šç¢ºèªç«™é» ID æˆ– URL æ˜¯å¦æ­£ç¢º
2. **Sitemap ç„¡æ³•è¨ªå•**ï¼šæª¢æŸ¥ Sitemap URL æ˜¯å¦å¯è¨ªå•
3. **ç„¡æˆæ•ˆæ•¸æ“š**ï¼šç¢ºèªè©²ç«™é»æ˜¯å¦æœ‰åŒæ­¥é GSC æ•¸æ“š

#### ç²å–å¹«åŠ©

```bash
# æŸ¥çœ‹å®Œæ•´å¹«åŠ©
just sitemap-help

# æŸ¥çœ‹è…³æœ¬å¹«åŠ©
poetry run python scripts/sitemap_url_performance_exporter.py --help
```

## ğŸ“ æª”æ¡ˆçµæ§‹

```
scripts/
â”œâ”€â”€ README.md                           # æœ¬æ–‡ä»¶
â”œâ”€â”€ sitemap_url_performance_exporter.py # Sitemap æˆæ•ˆåˆ†æå·¥å…·
â””â”€â”€ reports/                            # ç”Ÿæˆçš„å ±å‘Š (Git å¿½ç•¥)
    â””â”€â”€ *.csv                           # CSV å ±å‘Šæª”æ¡ˆ
```

## ğŸ”§ é–‹ç™¼èªªæ˜

é€™äº›è…³æœ¬æ˜¯ç‚ºäº†è™•ç†ç‰¹å®šçš„æ¥­å‹™éœ€æ±‚è€Œå‰µå»ºçš„ä¸€æ¬¡æ€§å·¥å…·ã€‚å®ƒå€‘ï¼š

- ä½¿ç”¨é …ç›®çš„ç¾æœ‰æœå‹™å’Œè³‡æ–™åº«é€£æ¥
- éµå¾ªé …ç›®çš„ç¨‹å¼ç¢¼é¢¨æ ¼å’Œçµæ§‹
- è¼¸å‡ºæª”æ¡ˆæœƒè¢« Git å¿½ç•¥
- å¯ä»¥é€šé `just` å‘½ä»¤æ–¹ä¾¿åœ°ä½¿ç”¨

å¦‚æœéœ€è¦æ–°çš„æ¥­å‹™è…³æœ¬ï¼Œå¯ä»¥åƒè€ƒç¾æœ‰è…³æœ¬çš„çµæ§‹å’Œæ¨¡å¼ã€‚

---

<p align="center">
  <strong>ğŸ’¡ æç¤ºï¼š</strong> é€™äº›æ¥­å‹™è…³æœ¬èˆ‡ä¸»å°ˆæ¡ˆçš„æ ¸å¿ƒåŠŸèƒ½ï¼ˆanalyze, syncï¼‰åˆ†é›¢ï¼Œå°ˆæ³¨æ–¼ç‰¹å®šçš„ä¸€æ¬¡æ€§åˆ†æéœ€æ±‚ã€‚
</p>
